<%- include('../includes/shop/head.ejs') %>

<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<!-- 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.4.0/remixicon.css" crossorigin=""> -->


</head>
<%- include('../includes/shop/navgation.ejs') %>

 
<main>
  <section id="hero">
    <h2>عالم التسوق بين يديك</h2>
    <!-- Swiper -->
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="/imjs/back.jpg" alt="Image 1">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/2.jpg" alt="Image 2">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/3.jpg" alt="Image 3">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/4.jpg" alt="Image 4">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/5.jpg" alt="Image 5">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/6.jpg" alt="Image 6">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/7.jpg" alt="Image 7">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/8.jpg" alt="Image 8">
        </div>
        <div class="swiper-slide">
          <img src="/imjs/back9.jpg" alt="Image 9">
        </div>

      </div>
      <div class="swiper-pagination"></div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
    </div>

  </section>
  
    <div id="shop-by-categories">
      <h2>Shop by categories</h2>
      <div class="categories-container">
        <ul>         
           <!-- <button id="next-button">التالي</button> -->

          <% categories.forEach(categorie => { %>
          <li>
            <div class="category-item">
              
              <a href="/user/subCategoriesPage?subCategorieId=<%= categorie.id %>&name=<%= categorie.name %>">
                <img src="..<%= categorie.url.replace('public', '') %>" alt="Phones & Telecommunications">
              </a>
              <p><%= categorie.name %></p>
            </div>
          </li>
          <% }); %>
          <!-- <button id="prev-button">السابق</button> -->
        </ul>
   
    
</div>
<section id="featured-jobs">
  <h2>عروض مميزة</h2>
  <ul>
      <% products.forEach(product => { %>
          <li>
              <a href="http://localhost:3000/shop/prdoduct/detlas?product_id=<%= product.id %>&view=<%= role  %>">
                  <img src="../images/<%= product.image_url.split('\\').pop().replace('personal', '') %>" alt="Product Image" style="aspect-ratio: 3 / 4;"/>
                  <h3><%= product.ProductName %></h3>
                  <p class="product-description"><%= product.Discrption %></p>
                  <p><%= product.Prise %></p>
              </a>
          </li>
      <% }) %>
  </ul>
</section>



  <section id="latest-jobs">
    <h2>آخر المنتجات</h2>
    <ul>
      <% products.forEach(product => { %>
        <li>
          <a href="http://localhost:3000/shop/prdoduct/detlas?product_id=<%= product.id %>&view=<%= role  %>">
            <img src="../images/<%= product.image_url.split('\\').pop() %>" alt="Product Image" style="aspect-ratio: 3 / 4;"/>
            <h3><%= product.ProductName %></h3>
            <p><%= product.Discrption %></p>
            <p class="prise"><%= product.Prise %></p>
          </a>
        </li>
      <% }) %>
    </ul>
  </section>
</main>


<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
  var swiper = new Swiper(".mySwiper", {
    spaceBetween: 30,
    loop: true,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: 3,
    coverflowEffect: {
      rotate: 50,
      stretch: 0,
      depth: 100,
      modifier: 1,
      slideShadows: true,
    },
  });

  document.addEventListener('DOMContentLoaded', function () {
    const container = document.querySelector('.categories-container ul');
    let isScrolling = false;

    function scroll() {
      if (!isScrolling) {
        container.scrollBy({
          left: -1, // تعديل الاتجاه
          behavior: 'smooth'
        });
      }
      if (container.scrollLeft <= 0) {
        container.scrollTo({ left: container.scrollWidth, behavior: 'smooth' });
      }
    }

    setInterval(scroll, 15); // جعل الحركة أسرع

    // إضافة أزرار التمرير
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');

    prevButton.addEventListener('click', function () {
      container.scrollBy({
        left: -150,
        behavior: 'smooth'
      });
    });

    nextButton.addEventListener('click', function () {
      container.scrollBy({
        left: 150,
        behavior: 'smooth'
      });
    });
  });
  // const container = document.querySelector('.categories-container ul');
  //     let isScrolling = false;

  //     function scroll() {
  //       if (!isScrolling) {
  //         container.scrollBy({
  //           left: -1, // التمرير لليسار
  //           behavior: 'smooth'
  //         });
  //       }
  //       if (container.scrollLeft <= 0) {
  //         container.scrollTo({ left: container.scrollWidth, behavior: 'smooth' });
  //       }
  //     }

  //     setInterval(scroll, 15); // سرعة الحركة

  //     // إضافة أزرار التمرير
  //     const prevButton = document.getElementById('prev-button');
  //     const nextButton = document.getElementById('next-button');

  //     prevButton.addEventListener('click', function () {
  //       container.scrollBy({
  //         left: -150,
  //         behavior: 'smooth'
  //       });
  //     });

  //     nextButton.addEventListener('click', function () {
  //       container.scrollBy({
  //         left: 150,
  //         behavior: 'smooth'
  //       });
  //     });
</script>
<%- include('../includes/shop/end.ejs') %>